"""
Роли
Settings->Manager Roles->Roles List
"""
type Roles {
    id: ID!
    "Название роли"
    name: String!
    "Описание для роли"
    description: String
    "Получить список разрешений"
    permissions: [Permissions] @belongsToMany(relation: "permissions")
    "Получить дерево разрешений"
    permisssions_tree: JSON
    "Получить список групп"
    groups: [Groups] @belongsToMany(relation: "groups")
    "Получить количество групп с данной ролью"
    groups_count: Int
}


extend type Query {
    "Получить роль по ID"
    role(id: ID @eq): Roles @field(resolver:"RoleQuery@permissions")
    """
    Получить список ролей
    groups_sort: сортировка по количеству групп
    orderBy: [{ column: ID, order: DESC }] сортировка по ID или по названию
    """
    roles(groups_sort: Sort @scope(name:"GroupsSort"), orderBy: _ @orderBy(
        columns: ["id","name","description"],
    )): [Roles!]! @paginate(defaultCount: 10) @orderBy(column: "id", direction: ASC)
}

type Mutation {
    createRole(
        "Название роли"
        name: String!
        "Описание"
        description: String
        "Массив разрешений"
        permissions: [ID]
        "Массив груп поумолчанию"
        groups: [ID]
    ): Roles @field(resolver:"RoleMutator@create")

    updateRole(
        "ID роли"
        id: ID!
        "Название роли"
        name: String!
        "Описание роли"
        description: String
        "Массив разрешений"
        permissions: [ID]
        "Массив групп поумолчанию"
        groups: [ID]
    ): Roles @field(resolver:"RoleMutator@update")

    deleteRole(
        "ID роли"
        id: ID!
    ): Roles @delete


}


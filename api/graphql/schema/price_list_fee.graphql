"""
Цены прайс листа
Banking -> Цены прайс листа
"""
type PriceListFee {
    id: ID!
    "Название"
    name: String!
    "Тип"
    fee_type: FeeType @belongsTo(relation: "feeType")
    "Тип операции"
    operation_type: OperationType @belongsTo(relation: "operationType")
    "Период"
    period: FeePeriod @belongsTo(relation: "feePeriod")
    "Цены"
    fees_item: [PriceListFeesItem] @hasMany(relation: "fees")
    "Получить Прайс лист комиссий"
    list: CommissionPriceList @belongsTo(relation: "priceList")
    created_at: DateTime
    updated_at: DateTime
}

type PriceListFeesItem {
    id: ID
    fee_item: JSON
}


extend type Query @guard {
    """
    Получить список Цен
    where:{column: NAME, operator: LIKE, value: ""} фильтр по имени, тип, тип операции, период
    """
    priceListFees(
        filter: _ @filterConditions(static: QueryPriceListFeesFilterStatic)
    ): [PriceListFee!]!   @orderBy(column: "id", direction: ASC) @all
}

input QueryPriceListFeesFilterStatic @spread{
    id: ID @eq
    price_list_id: ID @eq
    type_id: ID @eq
    operation_type_id: ID @eq
    period_id: ID @eq
    hasCompanyFilterById: ID @eq
    hasPaymentProviderFilterById: ID @eq
    hasPaymentSystemFilterById: ID @eq
    hasFeesFilterById: ID @eq
}


input Fee {
    fee_from: StringInteger
    fee_to: StringInteger
    mode: FeeMode
    fee: StringInteger
    currency: [String]
}

enum FeeMode {
    Fix @enum(value: "fix")
    Range @enum(value: "range")
    Percent @enum(value: "%")
}


extend type Mutation @guard {
    "Создать Цен"
    createPriceListFees(
        "Название"
        name: String
        "Тип"
        type_id: Int
        "Тип операции"
        operation_type_id: Int
        "Период"
        period_id: Int
        "ID Прайс лист"
        price_list_id: Int!
        fee: [[Fee]]
    ): PriceListFee   @field(resolver:"PriceListFeesMutator@create")

    "Обновить данные Цен"
    updatePriceListFees(
        id: ID!
        "Название"
        name: String
        "Тип"
        type_id: Int
        "Тип операции"
        operation_type_id: Int
        "Период"
        period_id: Int
        fee: [[Fee]]
    ): PriceListFee   @field(resolver:"PriceListFeesMutator@update")

    """
    Удалить Цен
    """
    deletePriceListFees(
        "ID price list fee"
        id: ID!
    ): PriceListFee   @delete

#    addFee(
#        price_list_fees_id: ID!
#        fee_item: [Fee]!
#    ):PriceListFeesItem
#
#    updateFee(
#        id: ID!
#        fee_item: [Fee]
#    ):PriceListFeesItem @field(resolver:"PriceListFeesMutator@update")

}

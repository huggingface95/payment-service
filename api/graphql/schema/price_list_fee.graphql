"""
Цены прайс листа
Banking -> Цены прайс листа
"""
type PriceListFee {
    id: ID!
    "Название"
    name: String!
    "Тип"
    fee_type: FeeType @belongsTo(relation: "feeType")
    "Тип операции"
    operation_type: OperationType @belongsTo(relation: "operationType")
    "Период"
    period: FeePeriod @belongsTo(relation: "feePeriod")
    "Цены"
    mode_fees: [PriceListModeFees] @hasMany(relation: "fees")
    "Получить Прайс лист комиссий"
    list: CommissionPriceList @belongsTo(relation: "priceList")
    created_at: DateTime
    updated_at: DateTime
}

type PriceListModeFees {
    id: ID
    mode: FeesMode @belongsTo(relation: "mode")
    fee: Float
    fee_from: Float
    fee_to: Float
    currencies: [Currencies] @hasMany(relation: "currencies")
}


extend type Query {
    """
    Получить список Цен
    where:{column: NAME, operator: LIKE, value: ""} фильтр по имени, тип, тип операции, период
    """
    priceListFees(
        hasList: _ @whereHasConditions(columns: ["name"]),
        price_list_id: ID @eq,
        where: _ @whereConditions(columns: ["name", "type", "operation_type", "period"])
    ): [PriceListFee!]! @orderBy(column: "id", direction: ASC) @all
}


input Fee {
    amount_from: StringInteger
    amount_to: StringInteger
    mode: String
    fee: StringInteger
    currency: String
}


extend type Mutation {
    "Создать Цен"
    createPriceListFees(
        "Название"
        name: String
        "Тип"
        type_id: Int
        "Тип операции"
        operation_type_id: Int
        "Период"
        period_id: Int
        "ID Прайс лист"
        price_list_id: Int!
    ): PriceListFee @create

    "Обновить данные Цен"
    updatePriceListFee(
        id: ID!
        "Название"
        name: String
        "Тип"
        type_id: Int
        "Тип операции"
        operation_type_id: Int
        "Период"
        period_id: Int
        "ID Прайс лист"
        price_list_id: Int
    ): PriceListFee @update

    """
    Удалить Цен
    """
    deletePriceListFee(
        "ID price list fee"
        id: ID!
    ): PriceListFee @delete

    """
    Добавить комиссию
    """
    addFee(
        price_list_fees_id: ID!
        fees_mode_id: ID!
        fee: Float
        fee_from: Float
        fee_to: Float
        currency_ids: [ID]
    ):PriceListModeFees @field(resolver:"PriceListModeFeesMutator@create")

    """
    Удалить комиссию
    """
    deleteFee(
        id: ID!
    ):PriceListModeFees @delete
}

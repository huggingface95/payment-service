"""
Шаблоны электронной почты
Banking-> Email Templates Settings
"""
type EmailSmtp {
    id: ID!
    "Защита"
    security: Securities!
    "Имя хоста"
    host_name: String!
    "От кого"
    from_name: String!
    "почта"
    from_email: String!
    "логин"
    username: String!
    "пароль"
    password: String!
    "ответить кому"
    replay_to: String!
    "Порт"
    port: Int!
    "Определяем отправлять через данные настройки всю почту или нет"
    is_sending_mail: Boolean
    "Получить шаблон"
    settings: EmailSetting @belongsTo(relation: "emailSetting")
    "Получить мембера"
    member: Members @belongsTo(relation: "member")
    "Получить компанию"
    company: Companies @belongsTo(relation: "company")
}

type EmailSetting {
    id: ID
    name: String
}

enum Securities {
    Auto @enum(value: "auto")
    Ssl @enum(value: "ssl")
    Starttls @enum(value: "starttls")
}

extend type Query @guard {
    "Получить по билет ID"
    emailSmtp(company_id: ID @eq): EmailSmtp @find

    emailSmtps(
        hasTemplate: _ @whereHasConditions(columns: ["name", "id"]),
        where: _ @whereConditions(columns: ["template_id","company_id"]),
        orderBy: _ @orderBy(
            columns: ["id"]
        )
    ): [EmailSmtp!]! @all @orderBy(column: "id", direction: ASC)
}

extend type Mutation @guard {
    "Создать смтп"
    createEmailSmtp(
        "Защита"
        security: Securities
        "Имя хоста"
        host_name: String!
        "От кого"
        from_name: String
        "почта"
        from_email: String
        "логин"
        username: String!
        "пароль"
        password: String!
        "ответить кому"
        replay_to: String
        "Порт"
        port: Int!
        "ID компании"
        company_id: ID!
        "Определяем отправлять через данные настройки всю почту или нет"
        is_sending_mail:Boolean
    ): EmailSmtp @field(resolver: "EmailSmtpMutator@create")

    "Обновить данные смтп"
    updateEmailSmtp(
        "ID компании"
        company_id: ID!
        "Защита"
        security: Securities
        "Имя хоста"
        host_name: String!
        "От кого"
        from_name: String
        "почта"
        from_email: String
        "логин"
        username: String!
        "пароль"
        password: String!
        "ответить кому"
        replay_to: String
        "Порт"
        port: Int!
        "Ид шаблона"
        email_setting_id: ID!
        "Определяем отправлять через данные настройки всю почту или нет"
        is_sending_mail: Boolean
    ): EmailSmtp @field(resolver: "EmailSmtpMutator@update")

    "Удалить запись"
    deleteEmailSmtp(
        "ID компании"
        company_id: ID!
        email_setting_id: ID!
    ): EmailSmtp @field(resolver: "EmailSmtpMutator@delete")

    sendEmail(
        "почта"
        email: String
    ):EmailSmtp @field(resolver: "EmailSmtpMutator@sendEmail")
}

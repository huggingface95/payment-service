
type Members {
    id: ID!
    first_name: String!
    last_name: String!
    email: EMAIL!
    sex: String
    is_active: Boolean
    company_id: Int
    company: Companies! @belongsTo(relation: "company")
    country: Country @belongsTo(relation: "country")
    language: Languages @belongsTo(relation: "language")
    role: Roles @belongsTo(ralation: "role")
    position: DepartmentPosition @belongsTo(relation: "position")
    two_factor_auth_setting_id: Int!
}


extend type Query {
    member(id: ID @eq): Members @find
    members: [Members!]! @paginate(defaultCount: 10)
}

extend type Mutation {
    createMember(
        first_name: String!
        last_name: String!
        email: EMAIL! @rules(apply: ["email", "unique:members"])
        sex: String
        company_id: Int!
        country_id: Int
        language_id: Int
        role_id: Int
        is_active: Boolean
        two_factor_auth_setting_id: Int!
        password: String
    ): Members @field(resolver: "MembersMutator@create")

    inviteMember(
        first_name: String!
        last_name: String!
        email: EMAIL! @rules(apply: ["email", "unique:members"])
        company_id: Int!
        role_id: Int
        two_factor_auth_setting_id: Int!
    ): Members @field(resolver: "MembersMutator@invite")

    updateMember(
        id: ID!
        first_name: String!
        last_name: String!
        email: EMAIL!
        sex: String
        company_id: Int!
        country_id: Int
        language_id: Int
        role_id: Int
        is_active: Boolean
    ): Members @field(resolver: "MembersMutator@update")

    setMemberPassword(
        id: ID!
        password: String! @rules(apply: ["confirmed","min:8", "regex:/[a-z]/","regex:/[A-Z]/","regex:/[0-9]/"])
        password_confirmation: String!
    ): Members @field(resolver: "MembersMutator@setPassword")

    deleteMember(
        id: ID!
    ): Members @delete

    setMemberPosition(
        member_id: ID!
        department_position: Int
    ): Members @field(resolver: "MembersMutator@setMemberPosition")


}


"""
Платежные системы
Settings->Payment System
"""
type PaymentSystem {
    id: ID!
    "Название платежной системы"
    name: String!
    "Активна или нет"
    is_active: Boolean
    "Получить связанные регионы"
    regions: [Region] @belongsToMany(relation:"regions")
    "Получить связанные валюты"
    currencies: [Currencies] @belongsToMany(relation:"currencies")
    "Получить Платежные провайдеры"
    providers: [PaymentProvider] @belongsToMany(relation:"providers")
}

extend type Query @guard {
    "Получить платежную систем по ID"
    paymentSystem(id: ID @eq): PaymentSystem   @find
    "Получить список платежных систем"
    paymentSystems(
        hasRegions: _ @whereHasConditions(columns: ["name", "id"]),
        hasCurrencies: _ @whereHasConditions(columns: ["name", "id"]),
        hasProviders: _ @whereHasConditions(columns: ["name", "id"]),
        where: _ @whereConditions(columns: ["name"]),
        orderBy: _ @orderBy(columns: ["id","name","is_active"])
    ): [PaymentSystem!]!   @paginate(defaultCount: 10) @orderBy(column: "id", direction: ASC)
}

extend type Mutation @guard {
    "Создать платежную систему"
    createPaymentSystem(
        "Название платежной системы"
        name: String!
        "Активный не активный (true/false)"
        is_active: Boolean
        "массив ID стран"
        regions: PivotTable
        "массив ID валют"
        currencies: PivotTable
        "массив ID провайдеров"
        providers: PivotTable
    ): PaymentSystem   @create

    "Обновить поля платежной системы"
    updatePaymentSystem(
        "ID платежной системы"
        id: ID!
        "Название платежной системы"
        name: String
        "Активный не активный (true/false)"
        is_active: Boolean
        "массив ID стран"
        regions: PivotTable
        "массив ID валют"
        currencies: PivotTable
        "массив ID провайдеров"
        providers: PivotTable
    ): PaymentSystem   @update

    "Удалить платежную систему"
    deletePaymentSystem(id: ID!): PaymentSystem   @field(resolver:"PaymentSystemMutator@delete")

}


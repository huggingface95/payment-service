"""
Прайс лист комиссий
Banking -> Commission Price List
"""
type CommissionPriceList {
    id: ID!
    "Название шаблона"
    name: String!
    "Получить связанный платежный провайдер"
    provider: PaymentProvider @belongsTo(relation:"paymentProvider")
    "Получить связанного мембера"
    owner: [ApplicantIndividual] @belongsToMany(relation: "owner")
    "Получить компанию"
    company: [ApplicantCompany] @belongsToMany(relation: "company")
    "Получить связанный аккаунт"
    account: Accounts @hasOne(relation: "account")
    "Получить связанную платежную систему"
    payment_system: PaymentSystem @belongsTo(relation:"PaymentSystem")
	"Получить связанный платежный шаблон"
    commission_template: CommissionTemplate @belongsTo(relation:"CommissionTemplate")
    "Получить связанные цены"
    fees: [PriceListFee] @hasMany(relation:"fees")
}

extend type Query @guard {
    "Получить прайс по ID"
    commissionPriceList(id: ID @eq): CommissionPriceList   @find
    """
    Получить список прайсов
    orderBy: [{ column: ID, order: DESC }] сортировка по ID
    """
    commissionPriceLists(
        hasPaymentSystem: _ @whereHasConditions(columns: ["name", "id"]),
        hasCommissionTemplate: _ @whereHasConditions(columns: ["name", "id"]),
        hasOwner: _ @whereHasConditions(columns: ["name", "id"]),
        hasCompany: _ @whereHasConditions(columns: ["name", "id"]),
        hasAccount: _ @whereHasConditions(columns: ["account_number"]),
        hasPaymentProvider: _ @whereHasConditions(columns: ["name", "id"]),
        paymentProviderName: Sort @scope(name:"PaymentProviderName"),
            where: _ @whereConditions(columns: ["name","payment_system_id","commission_template_id", "provider_id"]),
            orderBy: _ @orderBy(columns: ["id", "name"])
        ): [CommissionPriceList!]!   @paginate(defaultCount: 10) @orderBy(column: "id", direction: ASC)
}

extend type Mutation @guard {
    "Создать прай лист"
    createCommissionPriceList(
		"Название шаблона"
		name: String!
        "ID платежного провайдера"
        provider_id: ID!
        "ID платежной системы"
        payment_system_id: ID!
        "ID платежного шаблона"
        commission_template_id: ID!
    ):CommissionPriceList   @create

    "Редактирование частного пользователя"
    updateCommissionPriceList(
        id: ID!
       "Название шаблона"
		name: String!
        "ID платежного провайдера"
        provider_id: ID!
		"ID платежной системы"
        payment_system_id: ID!
		"ID платежного шаблона"
        commission_template_id: ID!
    ): CommissionPriceList   @update


    "Удалить прайс лист"
    deleteCommissionPriceList(
        id: ID!
    ): CommissionPriceList   @delete

}

